#!/bin/sh

# Check repo out
if [ ! -r $HOME/.dotfiles ]; then
  echo "Checking out dotfiles..."
  git clone git://github.com/abscondment/dotfiles.git \
    $HOME/.dotfiles
fi

cd $HOME/.dotfiles

for f in $(ls -a "$HOME/.dotfiles") ; do
    if ([ ! -r "$HOME/$f" ] || [ "$(readlink -n "$HOME/$f")" != "$HOME/.dotfiles/$f" ]) &&
        [ $f != "." ] && [ $f != ".." ] && [ $f != "README.md" ] &&
        [ "$f" != ".git" ] && [ $f != ".gitignore" ] ; then
	echo "LINKING $f"
	if [ -r "$HOME/$f" ]; then
	    rm -r "$HOME/$f"
	fi
        ln -s "$HOME/.dotfiles/$f" "$HOME/$f"
    fi
done
